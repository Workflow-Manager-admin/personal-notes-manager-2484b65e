{"is_source_file": true, "format": "Python", "description": "This file implements database access functions for managing 'notes' in a SQLite database. It includes functions to create the notes table, and perform CRUD operations: create, read, update, and delete notes. It uses context managers for database connections and constructs note objects from database rows.", "external_files": ["./models"], "external_methods": [], "published": ["db_create_note", "db_get_notes", "db_get_note", "db_update_note", "db_delete_note"], "classes": [{"name": "NoteCreate", "description": "Data model for creating a new note."}, {"name": "NoteInDB", "description": "Data model representing a note stored in the database."}, {"name": "NoteUpdate", "description": "Data model for updating an existing note."}], "methods": [{"name": "get_db()", "description": "Context manager for acquiring and releasing a database connection.", "scope": "", "scopeKind": ""}, {"name": "create_tables()", "description": "Creates the notes table if it does not exist.", "scope": "", "scopeKind": ""}, {"name": "NoteInDB db_create_note(note: NoteCreate)", "description": "Creates a new note in the database and returns the created note object.", "scope": "", "scopeKind": ""}, {"name": "List[NoteInDB] db_get_notes()", "description": "Retrieves all notes from the database, ordered by creation time.", "scope": "", "scopeKind": ""}, {"name": "Optional[NoteInDB] db_get_note(note_id: int)", "description": "Fetches a single note by its ID.", "scope": "", "scopeKind": ""}, {"name": "Optional[NoteInDB] db_update_note(note_id: int, note: NoteUpdate)", "description": "Updates an existing note identified by its ID.", "scope": "", "scopeKind": ""}, {"name": "bool db_delete_note(note_id: int)", "description": "Deletes a note by its ID.", "scope": "", "scopeKind": ""}, {"name": "NoteInDB db_row_to_note(row: sqlite3.Row)", "description": "Converts a database row into a NoteInDB object.", "scope": "", "scopeKind": ""}], "calls": ["get_db", "db.execute", "db.commit", "db_row_to_note", "create_tables", "datetime.utcnow", "datetime.fromisoformat"], "search-terms": ["notes_backend", "db_create_note", "db_get_notes", "db_update_note"], "state": 2, "file_id": 11, "knowledge_revision": 23, "git_revision": "", "ctags": [{"_type": "tag", "name": "DB_PATH", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-2484b65e/notes_backend/src/api/db.py", "pattern": "/^DB_PATH = os.getenv(\"NOTES_DB_PATH\", \"notes.db\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "create_tables", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-2484b65e/notes_backend/src/api/db.py", "pattern": "/^def create_tables():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "db_create_note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-2484b65e/notes_backend/src/api/db.py", "pattern": "/^def db_create_note(note: NoteCreate) -> NoteInDB:$/", "language": "Python", "typeref": "typename:NoteInDB", "kind": "function", "signature": "(note: NoteCreate)"}, {"_type": "tag", "name": "db_delete_note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-2484b65e/notes_backend/src/api/db.py", "pattern": "/^def db_delete_note(note_id: int) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(note_id: int)"}, {"_type": "tag", "name": "db_get_note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-2484b65e/notes_backend/src/api/db.py", "pattern": "/^def db_get_note(note_id: int) -> Optional[NoteInDB]:$/", "language": "Python", "typeref": "typename:Optional[NoteInDB]", "kind": "function", "signature": "(note_id: int)"}, {"_type": "tag", "name": "db_get_notes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-2484b65e/notes_backend/src/api/db.py", "pattern": "/^def db_get_notes() -> List[NoteInDB]:$/", "language": "Python", "typeref": "typename:List[NoteInDB]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "db_row_to_note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-2484b65e/notes_backend/src/api/db.py", "pattern": "/^def db_row_to_note(row: sqlite3.Row) -> NoteInDB:$/", "language": "Python", "typeref": "typename:NoteInDB", "kind": "function", "signature": "(row: sqlite3.Row)"}, {"_type": "tag", "name": "db_update_note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-2484b65e/notes_backend/src/api/db.py", "pattern": "/^def db_update_note(note_id: int, note: NoteUpdate) -> Optional[NoteInDB]:$/", "language": "Python", "typeref": "typename:Optional[NoteInDB]", "kind": "function", "signature": "(note_id: int, note: NoteUpdate)"}, {"_type": "tag", "name": "get_db", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-2484b65e/notes_backend/src/api/db.py", "pattern": "/^def get_db():$/", "language": "Python", "kind": "function", "signature": "()"}], "hash": "c6cac8f67b297311a4c4457d4e481d26", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/api/db.py", "fields": [{"name": "DB_PATH = os.getenv(\"NOTES_DB_PATH\", \"notes.db\")", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"23": ""}]}